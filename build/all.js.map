{"version":3,"sources":["index.js"],"names":["document","addEventListener","timer","timeValue","listener","e","window","clearTimeout","popup","determineDirection","setTimeout","narrowModel","Modal","block","_classCallCheck","this","checkRender","onClickEvent","flagAnimation","lastCursorSector","currentCursorSector","_createClass","key","value","Error","_this","destroyModal","_this2","removeEventListener","classList","remove","parentNode","add","setAttribute","_block$getBoundingCli","getBoundingClientRect","top","left","right","bottom","width","height","center","point","cursorX","pageX","cursorY","pageY","setCursorPosition","setModalPosition","coordinates","vector","vectorCoordinate","vectorDirection","vectorNormalize","vectorAngle","Math","atan2","PI","angle","getDirection","moveModal","innerHeight","style","tempRightValue","innerWidth","tempLeftValue","prevSide","_this3","undefined","_block$parentNode$get","get","_cursorY","set","_cursorX","x","y","sqrt","v_length","vectorLength","_vector","_slicedToArray","a","b","querySelector"],"mappings":"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","file":"all.js","sourcesContent":["document.addEventListener(\"DOMContentLoaded\", function(){\r\n\r\n\tlet timer;\r\n\tconst timeValue = 800;\r\n\tlet listener = function (e) {\r\n\t\twindow.clearTimeout(timer);\r\n\t\tpopup.determineDirection(e);\r\n\t\ttimer = window.setTimeout(function () {\r\n\t\t\tpopup.narrowModel();\r\n\t\t}, timeValue);\r\n\t};\r\n\tdocument.addEventListener(\"mousemove\",listener);\r\n\r\n\tclass Modal {\r\n\r\n\t\tconstructor(block) {\r\n\t\t\tthis.block = block;\r\n\t\t\tthis.checkRender();\r\n\t\t\tthis.onClickEvent();\r\n\t\t\tthis.flagAnimation = false;\r\n\t\t\tthis.lastCursorSector = null;\r\n\t\t\tthis.currentCursorSector = null;\r\n\t\t}\r\n\r\n\t\tcheckRender() {\r\n\t\t\tif (this.block === null) {\r\n\t\t\t\tthrow new Error(\"Sorry but this block wasn't render\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tonClickEvent() {\r\n\t\t\tthis.block.addEventListener(\"click\", (e) => {\r\n\t\t\t\twindow.clearTimeout(timer);\r\n\t\t\t\tthis.destroyModal();\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tdestroyModal() {\r\n\t\t\tdocument.removeEventListener(\"mousemove\",listener);\r\n\t\t\tthis.block.classList.remove(\"animation\");\r\n\t\t\tthis.block.parentNode.classList.add(\"hide-sub-container\");\r\n\t\t\tthis.block.parentNode.setAttribute(\"style\", \"top:0; left:0; right:0; bottom:0;\");\r\n\t\t\tthis.block.setAttribute(\"style\", \"top:0; left:0; right:0; bottom:0; height: 100%\");\r\n\t\t\tsetTimeout(() => {this.block.classList += \" hide-popup\";},timeValue);\r\n\t\t}\r\n\r\n\t\tsetModalPosition() {\r\n\t\t\tlet {top, left, right, bottom, width, height} = this.block.getBoundingClientRect();\r\n\t\t\tthis.top = top;\r\n\t\t\tthis.left = left;\r\n\t\t\tthis.right = right;\r\n\t\t\tthis.bottom = bottom;\r\n\t\t\tthis.width = width;\r\n\t\t\tthis.height = height;\r\n\t\t\tthis.center = Modal.point((width / 2) + left, (height / 2) + top);\r\n\t\t}\r\n\r\n\t\tget cursorY() {\r\n\t\t\treturn this._cursorY;\r\n\t\t}\r\n\r\n\t\tset cursorY(value) {\r\n\t\t\tthis._cursorY = value;\r\n\t\t}\r\n\r\n\t\tget cursorX() {\r\n\t\t\treturn this._cursorX;\r\n\t\t}\r\n\r\n\t\tset cursorX(value) {\r\n\t\t\tthis._cursorX = value;\r\n\t\t}\r\n\r\n\t\tstatic point(x, y) {\r\n\t\t\treturn [x, y];\r\n\t\t}\r\n\r\n\t\tstatic vectorLength(vector) {\r\n\t\t\treturn Math.sqrt((vector[0] * vector[0]) + (vector[1] * vector[1]));\r\n\t\t}\r\n\r\n\t\tstatic vectorNormalize(vector) {\r\n\t\t\tconst v_length = Modal.vectorLength(vector);\r\n\t\t\tconst [x, y] = vector;\r\n\t\t\treturn [x / v_length, y / v_length];\r\n\t\t}\r\n\r\n\t\tstatic vectorCoordinate(a, b) {\r\n\t\t\treturn [a[0] - b[0], a[1] - b[1]];\r\n\t\t}\r\n\r\n\t\tstatic getDirection(angle) {\r\n\t\t\tif (angle <= -45 && angle > -130) {\r\n\t\t\t\treturn \"TOP\";\r\n\t\t\t} else if ((angle > -180 && angle <= -130) || (angle <= 180 && angle > 130)) {\r\n\t\t\t\treturn \"LEFT\";\r\n\t\t\t} else if (angle > 45 && angle <= 130) {\r\n\t\t\t\treturn \"BOTTOM\";\r\n\t\t\t} else if (angle <= 45 && angle > -45) {\r\n\t\t\t\treturn \"RIGHT\";\r\n\t\t\t}\r\n\t\t\treturn \"NONE\";\r\n\t\t}\r\n\r\n\t\tsetCursorPosition(e) {\r\n\t\t\tthis.cursorX = e.pageX;\r\n\t\t\tthis.cursorY = e.pageY;\r\n\t\t}\r\n\r\n\t\tdetermineDirection(e) {\r\n\t\t\tthis.setCursorPosition(e);\r\n\t\t\tthis.setModalPosition();\r\n\t\t\tthis.lastCursorSector = this.currentCursorSector;\r\n\t\t\tconst coordinates = Modal.point(this.cursorX, this.cursorY);\r\n\t\t\tconst vector = Modal.vectorCoordinate(coordinates, this.center);\r\n\t\t\tconst vectorDirection = Modal.vectorNormalize(vector);\r\n\t\t\tconst vectorAngle = Math.atan2(vectorDirection[1], vectorDirection[0]) * (180 / Math.PI);\r\n\t\t\tthis.angle = Modal.getDirection(vectorAngle);\r\n\t\t\tthis.currentCursorSector = this.angle;\r\n\t\t\tthis.moveModal();\r\n\t\t}\r\n\r\n\t\tmoveModal() {\r\n\t\t\tif (!this.flagAnimation) {\r\n\t\t\t\tswitch(this.angle) {\r\n\t\t\t\t\tcase \"TOP\":\r\n\t\t\t\t\t\tif (this.bottom + this.cursorY + 10 < window.innerHeight){\r\n\t\t\t\t\t\t\tthis.block.style.height = this.height + this.cursorY + \"px\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"RIGHT\":\r\n\t\t\t\t\t\tconst tempRightValue = window.innerWidth - this.cursorX;\r\n\t\t\t\t\t\tif (this.left - tempRightValue - 10 > 0) {\r\n\t\t\t\t\t\t\tthis.block.style.left = this.cursorX - window.innerWidth + \"px\";\r\n\t\t\t\t\t\t\tthis.block.style.width = \"auto\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"LEFT\":\r\n\t\t\t\t\t\tif (this.right + this.cursorX + 10 < window.innerWidth) {\r\n\t\t\t\t\t\t\tthis.block.style.width = this.width + this.cursorX + \"px\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"BOTTOM\":\r\n\t\t\t\t\t\tconst tempLeftValue = window.innerHeight - this.cursorY;\r\n\t\t\t\t\t\tif (this.top - tempLeftValue - 10 > 0) {\r\n\t\t\t\t\t\t\tthis.block.style.top = this.cursorY - window.innerHeight + \"px\";\r\n\t\t\t\t\t\t\tthis.block.style.height = \"auto\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.lastCursorSector !== this.currentCursorSector && this.lastCursorSector !== null) {\r\n\t\t\t\tthis.narrowModel(this.lastCursorSector);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tnarrowModel(prevSide) {\r\n\t\t\tlet angle = (prevSide !== undefined) ? prevSide : this.angle;\r\n\t\t\tlet {height, width} = this.block.parentNode.getBoundingClientRect();\r\n\t\t\tthis.flagAnimation = true;\r\n\t\t\tthis.setModalPosition();\r\n\t\t\tswitch(angle) {\r\n\t\t\t\tcase \"TOP\":\r\n\t\t\t\t\tthis.block.parentNode.style.top = (this.bottom - height / 2) * 100 / window.innerHeight + \"%\";\r\n\t\t\t\t\tthis.block.style.height = \"100%\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"BOTTOM\":\r\n\t\t\t\t\tthis.block.parentNode.style.top = (this.top + height / 2) * 100 / window.innerHeight  + \"%\";\r\n\t\t\t\t\tthis.block.style.top = 0 + \"px\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"LEFT\":\r\n\t\t\t\t\tthis.block.parentNode.style.left = (this.right - width / 2) * 100 / window.innerWidth + \"%\";\r\n\t\t\t\t\tthis.block.style.width = \"100%\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"RIGHT\":\r\n\t\t\t\t\tthis.block.parentNode.style.left = (this.left + width / 2) * 100 / window.innerWidth + \"%\";\r\n\t\t\t\t\tthis.block.style.left = 0 + \"px\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tsetTimeout(() => {this.flagAnimation = false;},timeValue);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tlet popup = new Modal(document.querySelector(\".popup\"));\r\n});"]}