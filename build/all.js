"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _slicedToArray=function(){function t(t,e){var i=[],o=!0,r=!1,n=void 0;try{for(var s,c=t[Symbol.iterator]();!(o=(s=c.next()).done)&&(i.push(s.value),!e||i.length!==e);o=!0);}catch(t){r=!0,n=t}finally{try{!o&&c.return&&c.return()}finally{if(r)throw n}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}();document.addEventListener("DOMContentLoaded",function(){var t=void 0,e=800,i=function(i){window.clearTimeout(t),r.determineDirection(i),t=window.setTimeout(function(){r.narrowModel()},e)};document.addEventListener("mousemove",i);var o=function(){function o(t){_classCallCheck(this,o),this.block=t,this.checkRender(),this.onClickEvent(),this.flagAnimation=!1,this.lastCursorSector=null,this.currentCursorSector=null}return _createClass(o,[{key:"checkRender",value:function(){if(null===this.block)throw new Error("Sorry but this block wasn't render")}},{key:"onClickEvent",value:function(){var e=this;this.block.addEventListener("click",function(i){window.clearTimeout(t),e.destroyModal()})}},{key:"destroyModal",value:function(){var t=this;document.removeEventListener("mousemove",i),this.block.classList.remove("animation"),this.block.parentNode.classList.add("hide-sub-container"),this.block.parentNode.setAttribute("style","top:0; left:0; right:0; bottom:0;"),this.block.setAttribute("style","top:0; left:0; right:0; bottom:0; height: 100%"),setTimeout(function(){t.block.classList+=" hide-popup"},e)}},{key:"setModalPosition",value:function(){var t=this.block.getBoundingClientRect(),e=t.top,i=t.left,r=t.right,n=t.bottom,s=t.width,c=t.height;this.top=e,this.left=i,this.right=r,this.bottom=n,this.width=s,this.height=c,this.center=o.point(s/2+i,c/2+e)}},{key:"setCursorPosition",value:function(t){this.cursorX=t.pageX,this.cursorY=t.pageY}},{key:"determineDirection",value:function(t){this.setCursorPosition(t),this.setModalPosition(),this.lastCursorSector=this.currentCursorSector;var e=o.point(this.cursorX,this.cursorY),i=o.vectorCoordinate(e,this.center),r=o.vectorNormalize(i),n=Math.atan2(r[1],r[0])*(180/Math.PI);this.angle=o.getDirection(n),this.currentCursorSector=this.angle,this.moveModal()}},{key:"moveModal",value:function(){if(!this.flagAnimation)switch(this.angle){case"TOP":this.bottom+this.cursorY+10<window.innerHeight&&(this.block.style.height=this.height+this.cursorY+"px");break;case"RIGHT":var t=window.innerWidth-this.cursorX;this.left-t-10>0&&(this.block.style.left=this.cursorX-window.innerWidth+"px",this.block.style.width="auto");break;case"LEFT":this.right+this.cursorX+10<window.innerWidth&&(this.block.style.width=this.width+this.cursorX+"px");break;case"BOTTOM":var e=window.innerHeight-this.cursorY;this.top-e-10>0&&(this.block.style.top=this.cursorY-window.innerHeight+"px",this.block.style.height="auto")}this.lastCursorSector!==this.currentCursorSector&&null!==this.lastCursorSector&&this.narrowModel(this.lastCursorSector)}},{key:"narrowModel",value:function(t){var i=this,o=void 0!==t?t:this.angle,r=this.block.parentNode.getBoundingClientRect(),n=r.height,s=r.width;switch(this.flagAnimation=!0,this.setModalPosition(),o){case"TOP":this.block.parentNode.style.top=100*(this.bottom-n/2)/window.innerHeight+"%",this.block.style.height="100%";break;case"BOTTOM":this.block.parentNode.style.top=100*(this.top+n/2)/window.innerHeight+"%",this.block.style.top="0px";break;case"LEFT":this.block.parentNode.style.left=100*(this.right-s/2)/window.innerWidth+"%",this.block.style.width="100%";break;case"RIGHT":this.block.parentNode.style.left=100*(this.left+s/2)/window.innerWidth+"%",this.block.style.left="0px"}setTimeout(function(){i.flagAnimation=!1},e)}},{key:"cursorY",get:function(){return this._cursorY},set:function(t){this._cursorY=t}},{key:"cursorX",get:function(){return this._cursorX},set:function(t){this._cursorX=t}}],[{key:"point",value:function(t,e){return[t,e]}},{key:"vectorLength",value:function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}},{key:"vectorNormalize",value:function(t){var e=o.vectorLength(t),i=_slicedToArray(t,2),r=i[0],n=i[1];return[r/e,n/e]}},{key:"vectorCoordinate",value:function(t,e){return[t[0]-e[0],t[1]-e[1]]}},{key:"getDirection",value:function(t){return t<=-45&&t>-130?"TOP":t>-180&&t<=-130||t<=180&&t>130?"LEFT":t>45&&t<=130?"BOTTOM":t<=45&&t>-45?"RIGHT":"NONE"}}]),o}(),r=new o(document.querySelector(".popup"))});
//# sourceMappingURL=all.js.map
